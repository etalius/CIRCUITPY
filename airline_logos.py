import displayio

ARRAY_SIZE = 18
BITS_PER_ELEMENT = 2

UNITED = b"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x16T\x00\x00\n\xaa\xa8\x00\x00\xa9\xaa\xb8\x00\x06\xa7\xd8h\x00\xa9E\xfd\x00\t\xaa\x15\xba\x00\xe0\xbe\x82\xe0\x03\xa4\x7fS\x80K\xc6\xbbx\t\x9d\x80\xbd\x90\xb0n\n\xda\x03\xd8\xb7G\xa0\x16\xc1\xfc\x9e\x01\xfc/\xe9\xd0\xe7\xca'\xe5\x04\x1b\x80\xbd\x90"
UNITED_COLORS = [0x0a3194, 0x4b66a7, 0x809bd8, 0xcae0fd]

DELTA = b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`\x00\x00\x00\n@\x00\x00\x01\xa8\x00\x00\x00\xaa\xa4\x00\x00\x1a\xaa\x80\x00\x02\xaa\xa8\x00\x00*\xaa\x90\x00\x06\xaa\xaa\x00\x01\xaaF\xa4\x00*@\x06\x90\x06Ad\x1a\x00\x06\xaa\xa9@\x16\xaa\xaa\xaa@\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff'
DELTA_COLORS = [0xfbf3f4, 0xc67e87, 0xab1c36, 0x010200]

LUTHANSA_COLORS = [0xf2b845, 0x0b060b, 0xba965f, 0x684e32]
LUTHANSA = b'UUUUUU\xea\xadUU@\x005UX\x00\x00\xd5V\x00\x00\x0bU\x80\x00\x00\rp\x00\x02\xa0\x96>\x00\xd7\xf9`\xb85\xfe\x96\x02\xd5\x7f\xc9p\x0bX\x00\x97\x00\x0b\xe0\tX\x00\n\xe0\xd5`\x00\x005U\x80\x00\rUT\x00\x03UU^\xaa\xd5UUUUU'

BRITISH_COLORS = [0x060406, 0xb43928, 0xb7cad3, 0x3d76a9]
BRITISH = b'\x00\x00\x00\x00\x00\xf0\x00\x00\x00\n\x80\x00\x00\x00\xec\x00\x00\x00\x03\xf0\x00\x00\x00\x0f\xf0\x00\x00\x00?\x00\x00\x00\x00<\x00\x00\x00\n\xaa\xc0\x00\x00\xaa@\x00\x00\n\x95\x00\x00\x00%T\x00\x00\x01U@\x00\x00\x01U\x00\x00\x00\x15T\x00\x00\x00UP\x00\x00\x01U\x00\x00\x00\x00\x00'

AIR_CANADA_COLORS = [0xec3123, 0xfaf3f0, 0xf6b7b1, 0xd27069]
AIR_CANADA = b"UU\xa5UUV\xff\xf9UU\xbaZ\xe5U}VW\xd5\\U\xf5SW\x95@\x15m\xb5\xa4\x01\xa5\xefp\xc00\xdf\xf5\x00\x00\x05\xff\\\x00\x03_\xb5@\x00\x15\xebT\x00\x01^}\x83\xfc'\xd5\x89ZU%V%\xa5IU[\xee\xbeUU[\xdf\x95UUUUU"

SOUTHWEST_COLORS = [0xd93a33, 0x070707, 0xe4b493, 0x455593]
SOUTHWEST = b'UUUUUT\xd5]UV\x8a:\xa9U\x80\x02\xaa\xa5@\x00\x02\xaa\x96\x80\x00\x02\xa9~\x80\x00\n\xb7\xf8\x00\x00)\x7f\xe0\x00\x00\x97\xff\xa0\x00\t_\xfe\x80\x02U\xff\xfa\x00\xb5W\xff\xfa\tUW\xff\xf9UU\x7f\xff\xd5UU\xff\xf5UUU\xfdUUUUUU'

ALASKA_COLORS = [0x8ba9b0, 0x214465, 0xedf0f1, 0x507086]
ALAKSA = b'U\xc5UUUqUUU\\\x1dUuU\x07Ur7su^\xaa\x04\x11UQRO\x15}\xd7t\xf1W\xf9\x7f\xc7\xd5\xf2\xa0<]z\xaa\xaaE\xd4\xa0\n\xa4UrW*MU\r\xe8\xa75PB\xaaPU\x05J\xd5ET\r\xf5W\x15R\xd5U]UUU'

AMERICAN = b'U\x00\x00\x00\x05T\x00\x00\x00\x15@\x00\x00\x00U\x00\x00\x00\x05P\x00\x00\x00\x05P\x00\x00\x00U\x00\x00\x00\x00\x15P\x00\x00\x1f\xff\xc0\x00\x03\xff\xa0\x00\x00\x1f\xaa\x00\x00\x00\xfa\xa8\x00\x00\x02\xaa\x80\x00\x00\n\xaa\x00\x00\x00*\xa8\x00\x00\x02\xaa\xa0\x00\x00\n\xaa\x80\x00\x00\n\xa8'
AMERICAN_COLORS = [0x020102, 0x376c95, 0xa42d27, 0xc8cccf]

SPIRIT = b'\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\x8fU\xca\xaa\xadp\x15j\xaaT\xa8\x02\xaa\xa5W\xf2\xaa\xaa\xd5Uz\xaa\xab\xf5U*\xa8\x02\xa1R\xaa\x15@\xd5\xaa\xabUUJ\xaa\xa8\x00*\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa'
SPIRIT_COLORS = [0xa8a23b, 0x040402, 0xfbef50, 0x4f4c1f]

def get_element_from_bytes(byte_string: bytes, i: int, j: int) -> int:
    linear_index = i * ARRAY_SIZE + j
    byte_index = linear_index // 4
    element_position_in_byte = linear_index % 4
    shift = (3 - element_position_in_byte) * BITS_PER_ELEMENT
    packed_byte = byte_string[byte_index]
    shifted_value = packed_byte >> shift
    original_value = shifted_value & 0b11

    return original_value

def get_logo_g(logo, colors):
    planeBmp = displayio.Bitmap(18, 18, len(colors))
    planePalette = displayio.Palette(len(colors))

    for i in range(len(colors)):
        planePalette[i] =  colors[i]

    for i in range(18):
        for j in range(18):
            planeBmp[j, i] = get_element_from_bytes(logo, i, j)

    planeTg= displayio.TileGrid(planeBmp, pixel_shader=planePalette)
    planeTg.x = 3
    planeTg.y = 2
    planeG=displayio.Group(scale=1, x=0, y=0)
    planeG.append(planeTg)
    return planeG


